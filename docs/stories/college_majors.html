<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>US College Majors | Ismael Vargas</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Source+Serif+Pro:ital,wght@0,400;0,600;0,700;1,400;1,600;1,700&amp;display=swap" crossorigin>
<link rel="preload" as="style" href="../_observablehq/theme-air,near-midnight.css">
<link rel="preload" as="style" href="../_observablehq/stdlib/inputs.css">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css2?family=Source+Serif+Pro:ital,wght@0,400;0,600;0,700;1,400;1,600;1,700&amp;display=swap" crossorigin>
<link rel="stylesheet" type="text/css" href="../_observablehq/theme-air,near-midnight.css">
<link rel="stylesheet" type="text/css" href="../_observablehq/stdlib/inputs.css">
<link rel="modulepreload" href="../_observablehq/client.js">
<link rel="modulepreload" href="../_observablehq/runtime.js">
<link rel="modulepreload" href="../_observablehq/stdlib.js">
<link rel="modulepreload" href="../_import/utils/arquero.db8408e4.js">
<link rel="modulepreload" href="../_import/utils/strings.a240ab0e.js">
<link rel="modulepreload" href="../_npm/arquero@5.4.0/_esm.js">
<link rel="modulepreload" href="../_observablehq/stdlib/inputs.js">
<link rel="modulepreload" href="../_npm/d3-dsv@3.0.1/_esm.js">
<link rel="modulepreload" href="../_npm/d3@7.9.0/_esm.js">
<link rel="modulepreload" href="../_npm/htl@0.3.1/_esm.js">
<link rel="modulepreload" href="../_npm/@observablehq/plot@0.6.15/_esm.js">
<link rel="modulepreload" href="../_npm/isoformat@0.2.1/_esm.js">
<link rel="modulepreload" href="../_npm/apache-arrow@16.1.0/_esm.js">
<link rel="modulepreload" href="../_npm/acorn@8.11.3/_esm.js">
<link rel="modulepreload" href="../_npm/d3-array@3.2.4/_esm.js">
<link rel="modulepreload" href="../_npm/d3-axis@3.0.0/_esm.js">
<link rel="modulepreload" href="../_npm/d3-brush@3.0.0/_esm.js">
<link rel="modulepreload" href="../_npm/d3-chord@3.0.1/_esm.js">
<link rel="modulepreload" href="../_npm/d3-color@3.1.0/_esm.js">
<link rel="modulepreload" href="../_npm/d3-contour@4.0.2/_esm.js">
<link rel="modulepreload" href="../_npm/d3-delaunay@6.0.4/_esm.js">
<link rel="modulepreload" href="../_npm/d3-dispatch@3.0.1/_esm.js">
<link rel="modulepreload" href="../_npm/d3-drag@3.0.0/_esm.js">
<link rel="modulepreload" href="../_npm/d3-ease@3.0.1/_esm.js">
<link rel="modulepreload" href="../_npm/d3-fetch@3.0.1/_esm.js">
<link rel="modulepreload" href="../_npm/d3-force@3.0.0/_esm.js">
<link rel="modulepreload" href="../_npm/d3-format@3.1.0/_esm.js">
<link rel="modulepreload" href="../_npm/d3-geo@3.1.1/_esm.js">
<link rel="modulepreload" href="../_npm/d3-hierarchy@3.1.2/_esm.js">
<link rel="modulepreload" href="../_npm/d3-interpolate@3.0.1/_esm.js">
<link rel="modulepreload" href="../_npm/d3-path@3.1.0/_esm.js">
<link rel="modulepreload" href="../_npm/d3-polygon@3.0.1/_esm.js">
<link rel="modulepreload" href="../_npm/d3-quadtree@3.0.1/_esm.js">
<link rel="modulepreload" href="../_npm/d3-random@3.0.1/_esm.js">
<link rel="modulepreload" href="../_npm/d3-scale@4.0.2/_esm.js">
<link rel="modulepreload" href="../_npm/d3-scale-chromatic@3.1.0/_esm.js">
<link rel="modulepreload" href="../_npm/d3-selection@3.0.0/_esm.js">
<link rel="modulepreload" href="../_npm/d3-shape@3.2.0/_esm.js">
<link rel="modulepreload" href="../_npm/d3-time@3.1.0/_esm.js">
<link rel="modulepreload" href="../_npm/d3-time-format@4.1.0/_esm.js">
<link rel="modulepreload" href="../_npm/d3-timer@3.0.1/_esm.js">
<link rel="modulepreload" href="../_npm/d3-transition@3.0.1/_esm.js">
<link rel="modulepreload" href="../_npm/d3-zoom@3.0.0/_esm.js">
<link rel="modulepreload" href="../_npm/interval-tree-1d@1.0.4/_esm.js">
<link rel="modulepreload" href="../_npm/tslib@2.6.3/_esm.js">
<link rel="modulepreload" href="../_npm/flatbuffers@24.3.25/_esm.js">
<link rel="modulepreload" href="../_npm/internmap@2.0.3/_esm.js">
<link rel="modulepreload" href="../_npm/delaunator@5.0.1/_esm.js">
<link rel="modulepreload" href="../_npm/binary-search-bounds@2.0.5/_esm.js">
<link rel="modulepreload" href="../_npm/robust-predicates@3.0.2/_esm.js">
<link rel="icon" href="../_file/assets/ismael-favicon.0c0e520b.png" type="image/png" sizes="32x32">
<script type="module">

import {define} from "../_observablehq/client.js";
import {registerFile} from "../_observablehq/stdlib.js";

registerFile("../data/538-college-mayor-economic-guide.csv", {"name":"../data/538-college-mayor-economic-guide.csv","mimeType":"text/csv","path":"../_file/data/538-college-mayor-economic-guide.0c961b79.csv","lastModified":1718163676886});

define({id: "51d36693", inputs: ["html","plot","display"], body: async (html,plot,display) => {
display(await(
html.fragment`<!-- <main style="display: flex; justify-content: center"> -->
<article>
  <h1 style="font-size: 2em">US College Majors</h1>
  <p>
    The analysis is part of the TidyTuesday series. Details about the data
    <a
      href="https://github.com/rfordatascience/tidytuesday/tree/master/data/2018/2018-10-16"
      >here</a
    >.
  </p>
  <hr />
  <h2 style="margin-bottom: .2em">
    Popular majors were not near the highest paid ones
  </h2>
  <p>
    Despite having the highest number of graduates,
    <span class="psychology">Psychology</span> reported earnings 3.5 times less
    than <span class="petroleum">Petroleum Engineering</span>, the highest paid
    career.
  </p>
  <p>
    Bellow, each line corresponds to a major, conecting the number of graduates
    and median salaries.
  </p>
  ${plot}
</article>`
))
}});

define({id: "6b6f7c92", inputs: ["html","colorScale","display"], body: async (html,colorScale,display) => {
display(await(
html.fragment`<!-- <div">
  <span class="petroleum">Petroleum Engineering</span>
  <span class="psychology">Psychology</span>
</div> -->
<style>
  .petroleum {
    font-weight: bold;
    border-bottom: solid 2px ${colorScale.apply('Petroleum Engineering')}
  }
  .psychology {
    font-weight: bold;
    border-bottom: solid 2px ${colorScale.apply('Psychology')}
  }
</style>`
))
}});

define({id: "fadd1cfc", inputs: ["plot"], outputs: ["colorScale"], body: (plot) => {
const colorScale = plot.scale("color")
return {colorScale};
}});

define({id: "99a71026", body: () => {
// MEDIAN SALARIES OF MAJORS OF INTEREST
// top2
//   .select(["major", "dimension", "value"])
//   .filter((d) => d.dimension == "Median Salary")
//   .view()
}});

define({id: "4fe0af16", inputs: ["Plot","cols","dtFold","scls","top2","colTicks"], outputs: ["plot"], body: (Plot,cols,dtFold,scls,top2,colTicks) => {
const plot = Plot.plot({
  // subtitle: 'Each line corresponds to a major, conecting number of graduates and median salary.',
  caption:
    "Source: American Community Survey 2010-2012 Public Use Microdata Series",
  insetRight: 10,
  height: 250,
  marginLeft: 5,
  marginRight: 20,
  x: { axis: null },
  y: { padding: 0 },
  marks: [
    Plot.axisY({
      label: null,
      tickPadding: 9,
      tickSize: 0,
      fontWeight: "600",
      tickSize: 0,
      textAnchor: "start",
      tickFormat: (x) => `${x} â†’`,
      dx: 6,
      dy: -12,
    }),
    Plot.ruleY(cols, { strokeWidth: 0.1 }),
    Plot.line(dtFold, {
      x: (d) => scls.get(d.dimension)(d.value),
      y: "dimension",
      z: "major",
      strokeWidth: 0.5,
      strokeOpacity: 0.1,
    }),
    Plot.line(top2, {
      x: (d) => scls.get(d.dimension)(d.value),
      y: "dimension",
      z: "major",
      stroke: "major",
      strokeWidth: 1.5,
    }),
    Plot.text(colTicks, {
      x: (d) => scls.get(d.dimension)(d.value),
      y: "dimension",
      text: "value",
      fill: "white",
    }),
  ],
})
return {plot};
}});

define({id: "f0b11b91", outputs: ["aq","op","renameLower","toTitleCase"], body: async () => {
const [{default: aq, op, renameLower}, {toTitleCase}] = await Promise.all([import("../_import/utils/arquero.db8408e4.js"), import("../_import/utils/strings.a240ab0e.js")]);

return {aq,op,renameLower,toTitleCase};
}});

define({id: "a3fe70fa", inputs: ["FileAttachment"], outputs: ["data"], body: (FileAttachment) => {
const data = FileAttachment("../data/538-college-mayor-economic-guide.csv").csv(
  { typed: true }
)
return {data};
}});

define({id: "d0ab28a4", outputs: ["cols"], body: () => {
const cols = ["Graduates", "Median Salary"]
return {cols};
}});

define({id: "e54207c9", inputs: ["aq","data","renameLower","toTitleCase"], outputs: ["dt"], body: (aq,data,renameLower,toTitleCase) => {
const dt = aq
  .from(data)
  .filter((d) => d.Total)
  .rename(renameLower)
  .rename({ total: "Graduates", median: "Median Salary" })
  .select(
    aq.not([
      "rank",
      "major_code",
      "full_time",
      "part_time",
      "full_time_year_round",
    ])
  )
  .relocate("major_category", { before: 0 })
  .derive({
    major: aq.escape((d) => toTitleCase(d.major).replace("And", "&")),
  })
return {dt};
}});

define({id: "e694f295", inputs: ["dt","cols"], outputs: ["dtFold"], body: (dt,cols) => {
const dtFold = dt
  .select(["major", ...cols])
  .fold(cols, { as: ["dimension", "value"] })
return {dtFold};
}});

define({id: "471dc19c", inputs: ["dt","cols","aq","op"], outputs: ["top2"], body: (dt,cols,aq,op) => {
const top2 = dt
  .select(["major", ...cols])
  .orderby(aq.desc("Graduates"))
  .derive({
    rankGrads: op.dense_rank(),
  })
  .unorder()
  .orderby(aq.desc("Median Salary"))
  .derive({
    rankMedSal: op.dense_rank(),
  })
  .unorder()
  .derive({
    maxRankGrads: op.max("rankGrads"),
    maxRankMedSal: op.max("rankMedSal"),
  })
  .filter((d) => d.rankMedSal === 1 || d.rankGrads === 1)
  .fold(cols, { as: ["dimension", "value"] })
return {top2};
}});

define({id: "a91dab1b", inputs: ["cols","d3","aq","dt","op"], outputs: ["scls","colTicks"], body: (cols,d3,aq,dt,op) => {
const scls = new Map(
  cols.map((dimension) => [
    dimension,
    d3.scaleLinear().domain([0, aq.agg(dt, op.max(dimension))]),
  ])
)

const colTicks = cols.flatMap((dimension) => {
  return scls
    .get(dimension)
    .ticks(7)
    .map((value) => ({ dimension, value }))
})
return {scls,colTicks};
}});

</script>
<input id="observablehq-sidebar-toggle" type="checkbox" title="Toggle sidebar">
<label id="observablehq-sidebar-backdrop" for="observablehq-sidebar-toggle"></label>
<nav id="observablehq-sidebar">
  <ol>
    <label id="observablehq-sidebar-close" for="observablehq-sidebar-toggle"></label>
    <li class="observablehq-link"><a href="../">Ismael Vargas</a></li>
  </ol>
  <details open class="observablehq-section-active">
    <summary>Stories</summary>
    <ol>
    <li class="observablehq-link observablehq-link-active"><a href="./college_majors">US College Majors</a></li>
    </ol>
  </details>
</nav>
<script>{Object.assign(document.createElement("a"),{href:""}).password&&location.replace(location.href);const e=document.querySelector("#observablehq-sidebar"),t=document.querySelector("#observablehq-sidebar-toggle"),r=sessionStorage.getItem("observablehq-sidebar");r?t.checked=r==="true":t.indeterminate=!0;for(const o of document.querySelectorAll("#observablehq-sidebar summary")){const s=o.parentElement;switch(sessionStorage.getItem(`observablehq-sidebar:${o.textContent}`)){case"true":s.open=!0;break;case"false":s.classList.contains("observablehq-section-active")||(s.open=!1);break}}addEventListener("beforeunload",()=>sessionStorage.setItem("observablehq-sidebar-scrolly",`${e.scrollTop}`));const a=sessionStorage.getItem("observablehq-sidebar-scrolly");a!=null&&(e.style.cssText="overflow: hidden;",e.scrollTop=+a,e.style.cssText="");}</script>
<div id="observablehq-center">
<main id="observablehq-main" class="observablehq">
<div id="cell-51d36693" class="observablehq observablehq--block"><span class="observablehq-loading"></span></div>
<div id="cell-6b6f7c92" class="observablehq observablehq--block"><span class="observablehq-loading"></span></div>
<div id="cell-fadd1cfc" class="observablehq observablehq--block"></div>
<div id="cell-99a71026" class="observablehq observablehq--block"></div>
<div id="cell-4fe0af16" class="observablehq observablehq--block"></div>
<!-- HELPERS -->
<div id="cell-f0b11b91" class="observablehq observablehq--block"></div>
<div id="cell-a3fe70fa" class="observablehq observablehq--block"></div>
<div id="cell-d0ab28a4" class="observablehq observablehq--block"></div>
<div id="cell-e54207c9" class="observablehq observablehq--block"></div>
<div id="cell-e694f295" class="observablehq observablehq--block"></div>
<div id="cell-471dc19c" class="observablehq observablehq--block"></div>
<div id="cell-a91dab1b" class="observablehq observablehq--block"></div>
</main>
<footer id="observablehq-footer">
<div>Built with <a href="https://observablehq.com/" target="_blank" rel="noopener noreferrer">Observable</a> on <a title="2024-06-12T17:41:28">Jun 12, 2024</a>.</div>
</footer>
</div>
